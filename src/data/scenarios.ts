/**
 * Clinical scenarios for case-based learning
 */

import { ClinicalScenario } from '@/types';

export const scenarios: ClinicalScenario[] = [
  {
    id: 'sah-csw',
    title: 'Neuro-ICU: SAH with Hyponatremia',
    level: 'residency',
    presentingComplaint: '52-year-old woman, day 5 after aneurysmal SAH clipping, now with confusion and hyponatremia',
    clinicalContext: 'Patient admitted with severe headache, found to have SAH. Underwent successful aneurysm clipping. On day 5, nursing notes increasing confusion and lethargy.',
    initialState: {
      serumNa: 128,
      glucose: 95,
      BUN: 22,
      serumCreatinine: 1.1,
      urineOsm: 520,
      urineNa: 85,
      urineVolume: 2.5,
      volumeStatus: 'hypovolemic',
      hematocrit: 44,
      serumUricAcid: 3.8,
      calcium: 9.2,
      potassium: 3.9,
      hasCNSInjury: true,
      lithiumExposure: false,
      pregnancy: false,
      recentSurgery: true,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 600,
      timeElapsed: 0,
      weight: 65,
      age: 52,
      sex: 'female',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'Initial Exam',
        data: {
          general: 'Lethargic, confused to person',
          JVP: 'low',
          mucousMembranes: 'dry',
          skinTurgor: 'decreased',
          edema: 'none',
          neurologic: 'No focal deficits, GCS 13',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'Morning Labs',
        data: {
          serumNa: 128,
          serumK: 3.9,
          BUN: 22,
          creatinine: 1.1,
          serumOsm: 268,
          urineNa: 85,
          urineOsm: 520,
          hematocrit: 44,
        },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Distinguish CSW from SIADH in neurosurgical patients',
      'Recognize clinical hypovolemia as key differentiator',
      'Understand appropriate management with volume repletion',
      'Monitor for vasospasm in SAH patients',
    ],
    correctDiagnosis: 'CSW',
    managementPearls: [
      'CSW requires volume repletion with isotonic or hypertonic saline',
      'Salt tablets and fludrocortisone can help maintain sodium',
      'Fluid restriction (SIADH treatment) would worsen CSW',
      'Monitor for vasospasm days 4-14 post-SAH',
    ],
    pitfalls: [
      'Mistaking CSW for SIADH and restricting fluids',
      'Not recognizing hypovolemia on exam',
      'Over-rapid correction of chronic hyponatremia',
    ],
    tags: ['CSW', 'SAH', 'neurosurgery', 'hyponatremia', 'ICU'],
  },
  {
    id: 'pneumonia-siadh',
    title: 'Pneumonia with Euvolemic Hyponatremia',
    level: 'step2',
    presentingComplaint: '68-year-old man with cough, fever, and confusion',
    clinicalContext: 'Presented to ED with 3 days of productive cough, fever, and today developed confusion. Chest X-ray shows right lower lobe consolidation.',
    initialState: {
      serumNa: 122,
      glucose: 105,
      BUN: 8,
      serumCreatinine: 0.9,
      urineOsm: 450,
      urineNa: 55,
      urineVolume: 1.2,
      volumeStatus: 'euvolemic',
      hematocrit: 38,
      serumUricAcid: 3.2,
      calcium: 9.0,
      potassium: 4.1,
      hasCNSInjury: false,
      lithiumExposure: false,
      pregnancy: false,
      recentSurgery: false,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 800,
      timeElapsed: 0,
      weight: 75,
      age: 68,
      sex: 'male',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'ED Exam',
        data: {
          general: 'Confused, oriented only to self',
          JVP: 'normal',
          mucousMembranes: 'moist',
          skinTurgor: 'normal',
          edema: 'none',
          neurologic: 'No focal deficits',
          other: 'Crackles in right lower lung field',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'ED Labs',
        data: {
          serumNa: 122,
          serumK: 4.1,
          BUN: 8,
          creatinine: 0.9,
          glucose: 105,
          serumOsm: 252,
          urineNa: 55,
          urineOsm: 450,
          serumUricAcid: 3.2,
        },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Recognize SIADH as common complication of pneumonia',
      'Identify euvolemia as key clinical finding',
      'Understand fluid restriction as first-line therapy',
      'Manage symptomatic hyponatremia appropriately',
    ],
    correctDiagnosis: 'SIADH',
    managementPearls: [
      'Treat underlying pneumonia with antibiotics',
      'Fluid restriction to 800-1000 mL/day',
      'Salt tablets to increase solute intake',
      'If symptomatic and Na <120, consider hypertonic saline initially then restrict',
      'SIADH often resolves with treatment of pneumonia',
    ],
    pitfalls: [
      'Over-rapid correction with hypertonic saline',
      'Giving isotonic saline (may worsen hyponatremia in SIADH)',
      'Not treating underlying infection',
    ],
    tags: ['SIADH', 'pneumonia', 'hyponatremia', 'euvolemic'],
  },
  {
    id: 'lithium-ndi',
    title: 'Lithium-Induced Nephrogenic DI',
    level: 'step3',
    presentingComplaint: '45-year-old woman with bipolar disorder on lithium, now with polyuria and hypernatremia',
    clinicalContext: 'Patient on lithium for 10 years presents with 2 weeks of excessive thirst and urination (>5L/day). Feels weak and dizzy.',
    initialState: {
      serumNa: 152,
      glucose: 90,
      BUN: 18,
      serumCreatinine: 1.0,
      urineOsm: 180,
      urineNa: 40,
      urineVolume: 5.5,
      volumeStatus: 'euvolemic',
      hematocrit: 42,
      serumUricAcid: 5.5,
      calcium: 9.8,
      potassium: 4.2,
      hasCNSInjury: false,
      lithiumExposure: true,
      pregnancy: false,
      recentSurgery: false,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 900,
      timeElapsed: 0,
      weight: 60,
      age: 45,
      sex: 'female',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'Clinic Exam',
        data: {
          general: 'Alert, appears tired',
          JVP: 'normal',
          mucousMembranes: 'slightly dry',
          skinTurgor: 'normal',
          edema: 'none',
          neurologic: 'Normal',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'Outpatient Labs',
        data: {
          serumNa: 152,
          serumK: 4.2,
          BUN: 18,
          creatinine: 1.0,
          glucose: 90,
          calcium: 9.8,
          serumOsm: 312,
          urineOsm: 180,
          urineNa: 40,
        },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Recognize nephrogenic DI from lithium',
      'Understand water deprivation test interpretation',
      'Know management: amiloride, thiazides, low sodium diet',
      'Consider lithium discontinuation if possible',
    ],
    correctDiagnosis: 'nephrogenic-DI',
    managementPearls: [
      'Amiloride blocks ENaC channels and can reduce lithium uptake in collecting duct',
      'Thiazides paradoxically reduce urine output by causing mild volume depletion',
      'Low sodium diet enhances effectiveness of thiazides',
      'NSAIDs can help but have side effects (renal, GI)',
      'Coordinate with psychiatry before stopping lithium',
    ],
    pitfalls: [
      'Stopping lithium without psychiatric consultation',
      'Not correcting hypernatremia slowly (risk cerebral edema)',
      'Forgetting to check calcium and potassium (other causes of NDI)',
    ],
    tags: ['nephrogenic-DI', 'lithium', 'polyuria', 'hypernatremia'],
  },
  {
    id: 'post-tbi-cdi',
    title: 'Post-Traumatic Central DI',
    level: 'residency',
    presentingComplaint: '28-year-old man, day 2 after severe TBI, now with massive polyuria',
    clinicalContext: 'Involved in motor vehicle accident with severe head trauma. Underwent decompressive craniectomy. Now producing 800mL/hour of urine.',
    initialState: {
      serumNa: 155,
      glucose: 140,
      BUN: 25,
      serumCreatinine: 1.2,
      urineOsm: 120,
      urineNa: 25,
      urineVolume: 12,
      volumeStatus: 'euvolemic',
      hematocrit: 39,
      serumUricAcid: 6.0,
      calcium: 9.5,
      potassium: 3.8,
      hasCNSInjury: true,
      lithiumExposure: false,
      pregnancy: false,
      recentSurgery: true,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 800,
      timeElapsed: 0,
      weight: 80,
      age: 28,
      sex: 'male',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'ICU Exam',
        data: {
          general: 'Intubated, sedated',
          JVP: 'normal',
          mucousMembranes: 'normal',
          skinTurgor: 'normal',
          edema: 'none',
          neurologic: 'GCS 6, pupils reactive',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'POD2 Labs',
        data: {
          serumNa: 155,
          serumK: 3.8,
          BUN: 25,
          creatinine: 1.2,
          glucose: 140,
          serumOsm: 325,
          urineOsm: 120,
          urineNa: 25,
        },
        autoReveal: true,
      },
      {
        id: 'n1',
        timepoint: 0,
        type: 'note',
        title: 'Nursing Note',
        data: { note: 'Urine output 9600 mL in last 12 hours. Unable to keep up with IV replacement.' },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Recognize central DI after neurosurgery/TBI',
      'Understand triphasic response (initial DI, SIADH, permanent DI)',
      'Know desmopressin dosing and monitoring',
      'Manage free water replacement',
    ],
    correctDiagnosis: 'central-DI',
    managementPearls: [
      'Start DDAVP (desmopressin) 1-2 mcg IV or 0.1-0.2 mg PO',
      'Replace urine output with D5W or hypotonic fluids',
      'Monitor sodium closely - risk of triphasic response',
      'MRI to assess hypothalamus and posterior pituitary',
      'May be permanent if pituitary stalk transection',
    ],
    pitfalls: [
      'Over-treating with DDAVP causing hyponatremia',
      'Not anticipating triphasic response',
      'Inadequate fluid replacement leading to severe hypernatremia',
    ],
    tags: ['central-DI', 'TBI', 'neurosurgery', 'polyuria', 'ICU'],
  },
  {
    id: 'beer-potomania',
    title: 'Beer Potomania - Low Solute Hyponatremia',
    level: 'step2',
    presentingComplaint: '55-year-old homeless man with altered mental status',
    clinicalContext: 'Brought in by EMS after found confused. History of alcohol use disorder. Has been drinking only beer for several weeks. "Tea and toast" diet.',
    initialState: {
      serumNa: 118,
      glucose: 80,
      BUN: 6,
      serumCreatinine: 0.7,
      urineOsm: 85,
      urineNa: 15,
      urineVolume: 1.0,
      volumeStatus: 'euvolemic',
      hematocrit: 40,
      serumUricAcid: 2.8,
      calcium: 8.8,
      potassium: 3.7,
      hasCNSInjury: false,
      lithiumExposure: false,
      pregnancy: false,
      recentSurgery: false,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 150, // Very low!
      timeElapsed: 0,
      weight: 70,
      age: 55,
      sex: 'male',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'ED Exam',
        data: {
          general: 'Confused, disheveled',
          JVP: 'normal',
          mucousMembranes: 'moist',
          skinTurgor: 'normal',
          edema: 'none',
          neurologic: 'Confused but no focal deficits',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'ED Labs',
        data: {
          serumNa: 118,
          serumK: 3.7,
          BUN: 6,
          creatinine: 0.7,
          glucose: 80,
          serumOsm: 245,
          urineOsm: 85,
          urineNa: 15,
        },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Recognize beer potomania / low solute intake hyponatremia',
      'Understand importance of dilute urine as key finding',
      'Know risk of rapid auto-correction with normal diet',
      'Manage carefully to avoid osmotic demyelination',
    ],
    correctDiagnosis: 'beer-potomania',
    managementPearls: [
      'Key: dilute urine despite hyponatremia (Uosm <100)',
      'HIGH RISK: Will auto-correct rapidly when given normal solute intake',
      'Start normal diet slowly to avoid rapid correction',
      'May need D5W to prevent over-correction',
      'Monitor sodium every 2-4 hours initially',
    ],
    pitfalls: [
      'Not anticipating rapid auto-correction',
      'Giving normal saline (will worsen correction speed)',
      'Missing the diagnosis and restricting fluids like SIADH',
      'Rapid rise in Na can cause osmotic demyelination syndrome',
    ],
    tags: ['beer-potomania', 'alcohol', 'hyponatremia', 'low-solute'],
  },
  {
    id: 'psychogenic-polydipsia',
    title: 'Psychogenic Polydipsia vs Partial DI',
    level: 'step3',
    presentingComplaint: '32-year-old woman with schizophrenia and excessive water intake',
    clinicalContext: 'Psychiatric inpatient noted drinking water constantly. Nurses report >6L water intake daily. Psychiatry concerned about water intoxication.',
    initialState: {
      serumNa: 132,
      glucose: 88,
      BUN: 8,
      serumCreatinine: 0.8,
      urineOsm: 95,
      urineNa: 20,
      urineVolume: 8,
      volumeStatus: 'euvolemic',
      hematocrit: 36,
      serumUricAcid: 4.5,
      calcium: 9.2,
      potassium: 3.9,
      hasCNSInjury: false,
      lithiumExposure: false,
      pregnancy: false,
      recentSurgery: false,
      malignancy: false,
      fluidsGiven: [],
      medicationsGiven: [],
      soluteIntake: 700,
      timeElapsed: 0,
      weight: 55,
      age: 32,
      sex: 'female',
    },
    timeline: [
      {
        id: 'e1',
        timepoint: 0,
        type: 'exam',
        title: 'Bedside Exam',
        data: {
          general: 'Alert, anxious',
          JVP: 'normal',
          mucousMembranes: 'moist',
          skinTurgor: 'normal',
          edema: 'none',
          neurologic: 'Baseline psychiatric condition, no acute changes',
        },
        autoReveal: true,
      },
      {
        id: 'l1',
        timepoint: 0,
        type: 'labs',
        title: 'Morning Labs',
        data: {
          serumNa: 132,
          serumK: 3.9,
          BUN: 8,
          creatinine: 0.8,
          glucose: 88,
          serumOsm: 272,
          urineOsm: 95,
          urineNa: 20,
        },
        autoReveal: true,
      },
    ],
    learningObjectives: [
      'Differentiate psychogenic polydipsia from DI',
      'Understand water deprivation test methodology',
      'Recognize that low-normal Na suggests polydipsia rather than DI',
      'Manage psychiatric and medical aspects together',
    ],
    correctDiagnosis: 'primary-polydipsia',
    managementPearls: [
      'Water deprivation test: primary polydipsia will concentrate urine normally',
      'Behavioral interventions: scheduled water intake, supervised meals',
      'Avoid rapid correction if chronically hyponatremic',
      'Coordinate with psychiatry for underlying psych management',
      'Serum sodium normalizes when water restriction enforced',
    ],
    pitfalls: [
      'Mistaking for DI and giving DDAVP (will cause severe hyponatremia)',
      'Not recognizing compulsive water drinking behavior',
      'Over-restricting water too quickly (patient distress)',
    ],
    tags: ['polydipsia', 'psychiatric', 'polyuria', 'hyponatremia'],
  },
];
